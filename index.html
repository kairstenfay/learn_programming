<html lang="en"> 
	<head>
		<meta charset="utf-8">
		<title>D3 Page Template</title>
		<script type="text/javascript" src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<style></style>
		<style type = "text/css">

		
			div.bar {
				display: inline-block;
				width: 20px;
				height: 75px;
				background-color: teal;
				margin-right: 2px;
			}

			.axis path,
			.axis line { 
				fill : none;  /* when we use CSS to style SVG elements, we should only use SVG attribute names,*/
				stroke: black; /* not regular CSS properties */
				shape-rendering: crispEdges;
			}

			.axis text { 
				font-family: sans-serif;
				font-size: 11px;
			}
		
		</style>
	</head>
	<body>
		<svg width="500" height="50">
			<circle cx="25" cy="25" r="22" fill="yellow" stroke="orange" stroke-width="5"/>
		</svg>
		<br>
		<br>
		<svg width="500" height="50">
			<rect x="0" y="0" width="30" height="30" fill="purple"/>
			<rect x="20" y="5" width="30" height="30" fill="blue"/>
			<rect x="40" y="10" width="30" height="30" fill="green"/>
			<rect x="60" y="15" width="30" height="30" fill="yellow"/>
			<rect x="80" y="20" width="30" height="30" fill="red"/>
		</svg>
		<br>
		<br>
		<svg width="500" height="50"> 
			<circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 1.0)"/>
			<circle cx="50" cy="25" r="20" fill="rgba(0, 0, 255, 0.75)"/>
			<circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.5)"/>
			<circle cx="100" cy="25" r="20" fill="rgba(255, 255, 0, 0.25)"/>
			<circle cx="125" cy="25" r="20" fill="rgba(255, 0, 0, 0.1)"/>
		</svg>
		<br>
		<br>
		<svg width="500" height="50">
			<circle cx="25" cy="25" r="20"
			        fill="rgba(128, 0, 128, 0.75)" 
			        stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/>
			<circle cx="65" cy="25" r="20"
			        fill="rgba(128, 0, 128, 0.75)" 
			        stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"
			        opacity="0.5"/>
			<circle cx="105" cy="25" r="20"
			        fill="rgba(128, 0, 128, 0.75)" 
			        stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"
			        opacity="0.2"/>
		</svg>
		<br>
		<br>
		<svg width="500" height="50">
			<text x="250" y="25" font-family="sans-serif"
 					font-size="25" fill="gray">Easy-peasy</text>
 		</svg>
 		<br>
 		<br>
		<script type="text/javascript">

					//d3.select("body").append("p").text("New paragraph!");
					/* this could also be written chainless as: 
					var body = d3.select("body");
					var p = body.append("p");
					p.text("New paragraph!");
					*/

					// Global variable
					//var dataset = [5,10,15,20,25];
					var dataset = [];
					for (var i = 0; i < 25; i ++) { 
						var newNumber = Math.floor(Math.random() * 21) + 5;
						dataset.push(newNumber);
					}

					//Array.from({length: 40}, () => Math.floor(Math.random() * 40))
					/*
					d3.csv('food.csv', function(data) { 

						dataset = data; // Once loaded, copy to dataset
						generateVis(); // Then call other fnctions that depend on data being present 
						hideLoadingMsg();
					});
					*/
					// d3.select("body")
					// 	.selectAll("p")
					// 	.data(dataset)
					// 	.enter()
					// 	.append("p")
					// 	.text(function(d) { 
					// 		return "I can count up to " + d; 
					// 	})
					// 	.style("color", function(d) { 
					// 		if (d > 15) { 
					// 			return "red";
					// 		} else { 
					// 			return "black"; 
					// 		}
					// 	});

					
					// bar chart 
					d3.select("body").selectAll("div")
						.data(dataset) // d3 automatically expands our chart as needed 
						.enter()
						.append("div")
						.attr("class", "bar")
						.style("height", function(d) {
							var barHeight = d * 5; // Scale up by a factor of 5 
							return barHeight + "px";
						});

					var w = 500;
					var h = 80;
					var svg = d3.select("body")
								.append("svg")
								.attr("width", w)
								.attr("height", h);

					var circles = svg.selectAll("circle")
						.data(dataset)
						.enter()
						.append("circle");

					circles.attr("cx", function(d, i) { 
									return (i * 50) + 25;
								})
								.attr("cy", h/2)
								.attr("r", function(d) { 
									return d;
								})
								.attr("fill", "yellow")
								.attr("stroke", "orange")
								.attr("stroke-width", function(d) { 
									return d/2;
								});
			

					var w = 500;
					var h = 100;
					var barPadding = 1; 

					var svg = d3.select("body")
								.append("svg")
								.attr("width", w)
								.attr("height", h);

					// bar chart 
					svg.selectAll("rect")
						.data(dataset)
						.enter()
						.append("rect")
						.attr("x", function(d, i) { 
							return i * (w / dataset.length); //Creates an even spacing regardless of num values
						})
						.attr("y", function(d) { 
								return h - d * 4; // height minuts data value; keeps bars from being upside-down
							})
						.attr("width", w / dataset.length - barPadding)
						.attr("height", function(d) { 
								return d * 4;
							})
						.attr("fill", function(d) { 
							return "rgb(0, 0, " + (d * 10) + ")";
						});

					// bar labels 
					// svg.selectAll("text")
					// 	.data(dataset)
					// 	.enter()
					// 	.append("text")
					// 	.text(function(d) { 
					// 		return d;
					// 	})
					// 	.attr("x", function(d, i) { // put the labels at the left edge of each bar 
					// 								//   plus half the bar width
					// 		return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2; 
					// 	})
					// 	.attr("y", function(d) { // put the labels inside the bars
					// 		return h - (d * 4) + 14;
					// 	})
					// 	.attr("font-family", "sans-serif")
					// 	.attr("font-size", "11px")
					// 	.attr("fill", "white")
					// 	.attr("text-anchor", "middle");
						

					// Multivalue maps -- the more concise code 
					// svg.selectAll("rect")
					// 	.data(dataset)
					// 	.enter()
					// 	.append("rect")
					// 	.attr({
					// 		x: function(d, i) { return i * (w / dataset.length); }, 
					// 		y: function(d) { return h - (d * 4); }, 
					// 		width: w / dataset.length - barPadding,
					// 		height: function(d) { return d * 4; }, 
					// 		fill: function(d) { return "rgb(0, 0, " + (d * 10) + ")"; }
					// 	});
					
					var dataset = [
									[5,    20], 
									[480,  90], 
									[250,  50], 
									[100,  33], 
									[330,  95],
									[410,  12], 
									[475,  44], 
									[25,   67], 
									[85,   21], 
									[220,  88],
									[600, 150]
								];

					//Create SVG element -- Scatterplots 
					var svg = d3.select("body")
					            .append("svg")
					            .attr("width", w)
					            .attr("height", h);

					svg.selectAll("circle")
					    .data(dataset)
					    .enter()
					    .append("circle")
					    .attr("cx", function(d) {
					        return d[0];
					    })
					    .attr("cy", function(d) {
					        return d[1];
					    })
					    .attr("r", function(d) { // set the area values to the size of the data point
					   		return Math.sqrt(h - d[1]);
					    });

					 // labels 
					svg.selectAll("text")
						.data(dataset)
						.enter()
						.append("text")
						.text(function(d) { 
							return d[0] + ',' + d[1];
						})
						.attr("x", function(d) { 
							return d[0]
						})
						.attr("y", function(d) { 
							return d[1];
						})
						.attr("font-family", "sans-serif")
						.attr("font-size", "11px")
						.attr("fill", "red"); 

					// scales
					// input: domain
					// output: range
					var scale = d3.scale.linear();

					scale(2.5); // returns 2.5 
					scale.domain([100, 500]);
					scale.range([10, 350]);

					// or
					// var scale = d3.scale.linear()
					// 						.domain([100, 500])
					// 						.range([10, 350]);

					scale(100); // returns 10
					scale(300); // retrns 180
					scale(500); // returns 350 



					// we want to keep our code flexible, so will
					// analyze our datasets on the fly
					d3.max(dataset, function(d) { 
						return d[0];
					})

					var padding = 20; // keeps labels from being cut off 
					var h = 400;

					// setting up dynamic scales
					var xScale = d3.scale.linear()
										 .domain([0, d3.max(dataset, function(d) { return d[0];})])
										 .range([padding, w - 2 * padding]); //instead of [0, w-0]. doubling keeps labels 
										 // on far right from being cut off 

					var yScale = d3.scale.linear()
										 .domain([0, d3.max(dataset, function(d) { return d[1];})])
										 .range([h - padding, padding]); // otherwise larger y-values are at the bottom


					var rScale = d3.scale.linear()
										 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
										 .range([2, 5]);
					// setting up axes
					var xAxis = d3.svg.axis()
									  .scale(xScale)
									  .orient("bottom")
									  .ticks(5); // D3 interprets this as a mere suggestion 

					var yAxis = d3.svg.axis()
									  .scale(yScale)
									  .orient("left")
									  .ticks(5);

					// incorporating scaled values 
					var svg = d3.select("body")
					            .append("svg")
					            .attr("width", w)
					            .attr("height", h);

					svg.selectAll("circle")
					    .data(dataset)
					    .enter()
					    .append("circle")
					    .attr("cx", function(d) {
					        return xScale(d[0]);
					    })
					    .attr("cy", function(d) {
					        return yScale(d[1]);
					    })
					    .attr("r", function(d) { 
					   		return rScale(d[1]);
					    });
					//labels 
					svg.selectAll("text")
						.data(dataset)
						.enter()
						.append("text")
						.text(function(d) { 
							return d[0] + ',' + d[1];
						})
						.attr("x", function(d) { 
							return xScale(d[0]);
						})
						.attr("y", function(d) { 
							return yScale(d[1]);
						})
						.attr("font-family", "sans-serif")
						.attr("font-size", "11px")
						.attr("fill", "red"); 

					// put this code at the end of the script so that it's generated after
					// the other elements and goes 'on top'
					svg.append("g")
						.attr("class", "axis") // Assign "axis" class
						.attr("transform", "translate(0," + (h - padding) + ")") // put the axis on the bottom
						.call(xAxis); // see CSS styles in the <head> of our page 

				</script>
	</body>
</html>